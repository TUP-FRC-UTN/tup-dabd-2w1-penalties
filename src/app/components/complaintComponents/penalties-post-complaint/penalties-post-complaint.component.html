<div class="container p-5 border rounded border-3 border-secondary" style="min-height: 70vh;">
    <h2 class="text-center mb-5">NUEVA DENUNCIA</h2>
    <form #formDenuncia="ngForm" (ngSubmit)="onSubmit()" novalidate>
        <div class="row mb-4">
            <div class="col-1">
                <label for="selectOption" class="col-form-label">Motivo</label>
            </div>
            <div class="col-5">
                <div class="row align-items-center mb-2">
                    <div class="col-12">
                        <select id="selectOption" class="form-select" name="option" [(ngModel)]="selectedOption"
                            #optionField="ngModel" required>
                            <option value="" disabled selected>Seleccione una opción</option>
                            @for (type of complaintTypes; track $index) {
                            <option [value]="type.key">{{type.value}}</option>
                            }
                        </select>
                        @if (optionField.invalid && (optionField.dirty || optionField.touched)) {
                        <div class="form-text text-danger mt-1">
                            @if (optionField.errors?.['required']) {
                            <span>Por favor, ingrese una opción</span>
                            }
                        </div>
                        }
                    </div>
                </div>
            </div>

            <div class="col-1">
                <label for="dateInput" class="col-form-label text-end">Fecha</label>
            </div>
            <div class="col-5">
                <div class="row align-items-center mb-2">
                    <div class="col-12">
                        <input type="date" id="dateInput" name="dateInput" class="form-control" [(ngModel)]="selectedDate"
                            #dateField="ngModel" [max]="maxDate" required disabled>
                        @if (dateField.invalid && (dateField.dirty || dateField.touched)) {
                        <div class="form-text text-danger mt-1">
                            @if (dateField.errors?.['required']) {
                            <span>Por favor, seleccione una fecha.</span>
                            } @else if (dateField.errors?.['max']) {
                            <span>La fecha no puede ser posterior a la de hoy.</span>
                            }
                        </div>
                        }
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-1">
                <label for="textareaMessage" class="col-form-label">Mensaje</label>
            </div>
            <div class="col-11">
                <textarea class="form-control" name="textareaMessage" id="textareaMessage"
                    [placeholder]="textareaPlaceholder" [(ngModel)]="textareaContent" #textArea="ngModel" required
                    minlength="10" maxlength="500" rows="8"></textarea>
                @if (textArea.invalid && (textArea.dirty || textArea.touched)) {
                <div class="form-text text-danger mt-1">
                    @if (textArea.errors?.['required']) {
                    <span>Por favor, ingrese un mensaje.</span>
                    }
                    @if (textArea.errors?.['minlength']) {
                    <span>El mensaje debe tener al menos 10 caracteres.</span>
                    }
                </div>
                }
            </div>
        </div>

        <div class="row">
            <div class="col-auto">
                <app-penalties-file-upload-button (finalFiles)="getFiles($event)" />
            </div>
            <div class="col d-flex justify-content-end">
                <button type="button" class="btn btn-secondary me-3" [routerLink]="'../listComplaint'">Cancelar</button>
                <button type="submit" class="btn btn-success" [disabled]="formDenuncia.invalid">Enviar</button>
            </div>
        </div>
    </form>
</div>

<!-- TODO ver clase invalid-feedback de bootstrap para los marcos en los inputs segun validaciones -->